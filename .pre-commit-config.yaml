# Pre-commit hooks for documentation/research repo
# Optimized for markdown, CSV, and text files (no code)

repos:
  # Markdown linting and formatting
  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.46.0
    hooks:
      - id: markdownlint-fix
        args:
          - --disable=MD013  # Line length (tables can be long)
          - --disable=MD024  # Multiple headers with same content (common in research)
          - --disable=MD033  # Allow inline HTML (for diagrams/formatting)
          - --disable=MD036  # Emphasis as heading (allow bold for emphasis, not just headings)
          - --disable=MD040  # Fenced code language (not all blocks need language)
          - --disable=MD041  # First line in file should be top-level header (not always needed)
          - --disable=MD060  # Table column spacing (too strict for research docs)

  # Spell checking for documentation
  - repo: https://github.com/codespell-project/codespell
    rev: v2.4.1
    hooks:
      - id: codespell
        args:
          - --skip=*.csv  # Skip CSV files (may contain technical terms)
          - --ignore-words-list=grok,xai,nsfw,rlhf,llm,vlm,sprt  # Research-specific terms
        exclude: ^data/results/manual_tests\.csv$

  # Basic file hygiene
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: check-yaml
      - id: check-added-large-files
        args: ['--maxkb=10000']  # Allow up to 10MB (research images/data)
      - id: check-merge-conflict
      - id: end-of-file-fixer
        exclude: ^data/results/manual_tests\.csv$
      - id: mixed-line-ending
        args: ['--fix=lf']
      - id: check-case-conflict  # Prevent case-sensitive filename issues

  # CSV validation (custom local hook)
  - repo: local
    hooks:
      - id: check-csv-format
        name: Check CSV Format
        entry: python3 -c "import csv, sys; [csv.Sniffer().sniff(open(f).read(1024)) for f in sys.argv[1:]]"
        language: system
        files: \.csv$
        exclude: ^$  # Run on all CSV files
